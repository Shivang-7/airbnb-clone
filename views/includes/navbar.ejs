<nav class="navbar navbar-expand-md bg-body-light border-bottom sticky-top">
  <div class="container-fluid">

    <!-- Navbar content -->
    <div class="collapse navbar-collapse show" id="navbarNavAltMarkup" style="display: block !important;">
      <!-- Desktop/Tablet Navbar -->
      <div class="d-none d-md-flex w-100 align-items-center">
        <!-- Logo -->
        <a class="navbar-brand ms-4" href="/listings">
          <i class="fa-regular fa-compass"></i>
        </a>
        <div class="navbar-nav">
          <a class="nav-link" href="/listings">Explore</a>
        </div>
        <div class="search-bar-container mt-3 mb-3 flex-grow-1">
          <form class="search-bar d-flex shadow" action="/listings" method="GET" style="width:fit-content;">
            <div class="search-section">
              <div class="section-title">Where</div>
              <input
                type="text"
                name="search"
                class="form-control section-sub"
                placeholder="Search destinations"
                style="border:none; box-shadow:none; padding:0; background:transparent; width:130px; font-size:0.85rem; font-weight:500;"
              />
            </div>
            <div class="divider"></div>
            <div class="search-section">
              <div class="section-title">Check in</div>
              <div class="section-sub">Add dates</div>
            </div>
            <div class="divider"></div>
            <div class="search-section">
              <div class="section-title">Check out</div>
              <div class="section-sub">Add dates</div>
            </div>
            <div class="divider"></div>
            <div class="search-section">
              <div class="section-title">Who</div>
              <div class="section-sub">Add guests</div>
            </div>
            <button class="search-button" type="submit">
              <i class="fa-solid fa-magnifying-glass"></i>
            </button>
          </form>
        </div>
        <div class="navbar-nav ms-auto align-items-center gap-3">
          <a class="nav-link" href="/listings/new">Become a host</a>
          <div class="menu-wrapper me-4 position-relative">
            <div class="hamburger" onclick="toggleMenu()">
              <i class="fa-solid fa-bars"></i>
            </div>
            <div id="dropdown" class="dropdown-menu-custom hidden">
              <% if (!currUser) { %>
                <a class="nav-link dropdown-item-custom" href="/signup">Sign up</a>
                <hr>
                <a class="nav-link dropdown-item-custom" href="/login">Log in</a>
              <% } else { %>
                <a class="nav-link dropdown-item-custom" href="/logout">Log out</a>
              <% } %>
            </div>
          </div>
        </div>
      </div>

      <!-- Mobile View -->
      <div class="d-md-none">
        <div class="mobile-dropdown-panel" style="display: block !important; position: static; box-shadow: none; border-radius: 0;">
          <div class="mobile-dropdown-row d-flex justify-content-between align-items-center px-3 py-2">
            <div class="d-flex align-items-center gap-2">
              <a class="nav-link px-2" href="/listings">Explore</a>
              <a class="nav-link px-2" href="/listings/new">Host</a>
            </div>
            <div class="flex-grow-1"></div>
            <div class="d-flex align-items-center gap-2">
              <% if (!currUser) { %>
                <a class="nav-link px-2" href="/signup">Sign up</a>
                <a class="nav-link px-2" href="/login">Log in</a>
              <% } else { %>
                <a class="nav-link px-2" href="/logout">Log out</a>
              <% } %>
            </div>
          </div>
          <div class="mobile-dropdown-row px-3 pb-3">
            <form class="search-bar d-flex shadow" action="/listings" method="GET" style="width:100%;">
              <div class="search-section w-100">
                <div class="section-title">Where</div>
                <input
                  type="text"
                  name="search"
                  class="form-control"
                  placeholder="Search destinations"
                  aria-label="Search destinations"
                  style="border:none; box-shadow:none; padding:0; background:transparent; font-size:0.9rem; font-weight:500;"
                />
              </div>
              <button class="search-button" type="submit">
                <i class="fa-solid fa-magnifying-glass"></i>
              </button>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>
</nav>